import React, { useState } from 'react';
import { Play, Pause, Heart, Share2, Clock, Calendar, User, ArrowLeft, Mail, ExternalLink } from 'lucide-react';

const StoryDetail = () => {
  const [isPlaying, setIsPlaying] = useState(false);
  const [showEmailSignup, setShowEmailSignup] = useState(false);
  
  // This will be dynamically loaded based on the story slug in the real version
  const story = {
    id: "sample-story-2025-01-15",
    title: "The Sleepy Forest Friends",
    excerpt: "Join Benny the Bear and Luna the Rabbit as they discover the secret to the most peaceful sleep in the enchanted forest.",
    content: `Once upon a time, in a magical forest where the trees whispered lullabies and the stars sang gentle songs, there lived two best friends: Benny the Bear and Luna the Rabbit.

Every night, as the sun painted the sky in soft purples and pinks, all the forest animals would prepare for bed. But Benny and Luna had discovered something special - a secret that made their sleep the most peaceful and restful in the entire forest.

**Chapter 1: The Discovery**

It all started one evening when Benny couldn't fall asleep. He tossed and turned in his cozy cave, his mind racing with thoughts of the day's adventures. "Luna," he called softly to his friend who lived in the burrow next door, "are you awake too?"

Luna poked her head out, her ears twitching gently. "Yes, Benny. I can't seem to settle down either. Maybe we should try Grandmother Owl's special bedtime secret."

**Chapter 2: The Breathing Forest**

The two friends ventured deeper into the forest than they had ever gone before. There, in a clearing filled with the softest moss and surrounded by glowing fireflies, they found Grandmother Owl perched on an ancient oak tree.

"Ah, my dear ones," hooted Grandmother Owl with a knowing smile. "You've come seeking the secret of peaceful sleep. Sit down on this soft moss, and I'll teach you what the forest has known for centuries."

**Chapter 3: The Magic Breath**

"Close your eyes," whispered Grandmother Owl, "and breathe like the forest breathes. In... slowly... like the gentle wind through the leaves. Out... softly... like the evening breeze that rocks the trees to sleep."

Benny and Luna followed her instructions. With each breath, they felt more relaxed, more connected to the peaceful rhythm of the forest around them.

**Chapter 4: The Gratitude Garden**

"Now," continued Grandmother Owl, "think of three things that made you smile today. Let each happy memory fill your heart like warm sunshine."

Benny thought of the delicious honey he had found, the fun game of hide-and-seek with Luna, and the beautiful butterfly that had landed on his nose. Luna remembered the sweet clover she had for lunch, the soft rain that watered her favorite flowers, and Benny's silly joke that made her laugh.

**Chapter 5: The Sleepy Spell**

As they practiced the forest breathing and remembered their happy moments, something magical happened. The fireflies began to glow brighter, creating a soft, dreamy light. The trees seemed to sway in a gentle rhythm, and even the crickets chirped a softer, more soothing song.

"This is the secret," explained Grandmother Owl. "When we breathe slowly and remember what makes us grateful, our bodies and minds naturally prepare for the most restful sleep."

**Chapter 6: Sweet Dreams**

From that night forward, Benny and Luna used their special bedtime routine. They would find a comfortable spot, breathe like the forest, think of their happy moments, and drift off into the most wonderful dreams.

And so, dear little one, as you snuggle into your own cozy bed tonight, remember Benny and Luna's secret. Breathe slowly and deeply, think of three things that made you smile today, and let the magic of peaceful sleep carry you away to your own beautiful dreams.

*The End*

Sweet dreams, little one. May your sleep be as peaceful as Benny and Luna's in their magical forest. ðŸŒ™`,
    duration: "12:30",
    youtubeId: "sample123",
    audioUrl: "/audio/sleepy-forest-friends.mp3",
    thumbnailUrl: "/images/sleepy-forest-friends-thumb.jpg",
    publishedAt: "January 15, 2025",
    tags: ["forest", "friendship", "bedtime", "animals"],
    affiliateProducts: [
      {
        name: "Cozy Weighted Blanket for Kids",
        amazonUrl: "https://amzn.to/sample-link",
        context: "Just like Benny's favorite blanket that helped him sleep so soundly..."
      },
      {
        name: "Soft Night Light with Timer",
        amazonUrl: "https://amzn.to/sample-link-2", 
        context: "Luna used a gentle glow just like this to light her way through the forest..."
      },
      {
        name: "Meditation Pillow for Children",
        amazonUrl: "https://amzn.to/sample-link-3",
        context: "Perfect for practicing the special breathing technique from the story..."
      }
    ]
  };

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Back Button */}
      <div className="bg-white border-b">
        <div className="max-w-4xl mx-auto px-4 py-4">
          <button className="flex items-center gap-2 text-purple-600 hover:text-purple-700 transition-colors">
            <ArrowLeft className="w-4 h-4" />
            Back to Stories
          </button>
        </div>
      </div>

      {/* Story Header */}
      <div className="bg-gradient-to-r from-purple-600 to-blue-600 text-white py-12">
        <div className="max-w-4xl mx-auto px-4">
          <div className="flex flex-col md:flex-row gap-8 items-center">
            <div className="md:w-1/3">
              <div className="relative">
                <img 
                  src={story.thumbnailUrl} 
                  alt={story.title}
                  className="w-full rounded-xl shadow-lg"
                />
                <div className="absolute inset-0 bg-black bg-opacity-30 rounded-xl flex items-center justify-center">
                  <button 
                    onClick={() => setIsPlaying(!isPlaying)}
                    className="bg-white bg-opacity-90 p-4 rounded-full hover:bg-opacity-100 transition-colors"
                  >
                    {isPlaying ? (
                      <Pause className="w-8 h-8 text-purple-600" />
                    ) : (
                      <Play className="w-8 h-8 text-purple-600" />
                    )}
                  </button>
                </div>
              </div>
            </div>
            
            <div className="md:w-2/3">
              <h1 className="text-3xl md:text-4xl font-bold mb-4">
                {story.title}
              </h1>
              <p className="text-xl opacity-90 mb-6">
                {story.excerpt}
              </p>
              
              <div className="flex flex-wrap gap-4 text-sm opacity-80 mb-6">
                <div className="flex items-center gap-1">
                  <Clock className="w-4 h-4" />
                  {story.duration}
                </div>
                <div className="flex items-center gap-1">
                  <Calendar className="w-4 h-4" />
                  {story.publishedAt}
                </div>
                <div className="flex items-center gap-1">
                  <User className="w-4 h-4" />
                  Snoozies Stories
                </div>
              </div>
              
              <div className="flex flex-wrap gap-2 mb-6">
                {story.tags.map((tag, idx) => (
                  <span key={idx} className="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm">
                    {tag}
                  </span>
                ))}
              </div>
              
              <div className="flex gap-3">
                <button className="bg-white text-purple-600 px-6 py-3 rounded-lg font-semibold hover:bg-opacity-90 transition-colors flex items-center gap-2">
                  {isPlaying ? <Pause className="w-4 h-4" /> : <Play className="w-4 h-4" />}
                  {isPlaying ? 'Pause' : 'Listen Now'}
                </button>
                <button className="border-2 border-white text-white px-6 py-3 rounded-lg hover:bg-white hover:text-purple-600 transition-colors flex items-center gap-2">
                  <Heart className="w-4 h-4" />
                  Save
                </button>
                <button className="border-2 border-white text-white px-4 py-3 rounded-lg hover:bg-white hover:text-purple-600 transition-colors">
                  <Share2 className="w-4 h-4" />
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div className="max-w-4xl mx-auto px-4 py-12">
        <div className="grid lg:grid-cols-3 gap-8">
          {/* Main Content */}
          <div className="lg:col-span-2">
            {/* YouTube Embed */}
            <div className="bg-white rounded-xl shadow-lg p-6 mb-8">
              <h2 className="text-2xl font-bold text-gray-900 mb-4">
                ðŸŽ§ Listen Along
              </h2>
              <div className="aspect-video bg-gray-200 rounded-lg flex items-center justify-center">
                <div className="text-center text-gray-500">
                  <Play className="w-12 h-12 mx-auto mb-2" />
                  <p>YouTube Video Player</p>
                  <p className="text-sm">ID: {story.youtubeId}</p>
                </div>
              </div>
            </div>

            {/* Story Content */}
            <div className="bg-white rounded-xl shadow-lg p-6 mb-8">
              <h2 className="text-2xl font-bold text-gray-900 mb-6">
                ðŸ“– Read Along
              </h2>
              <div className="
